{"version":3,"sources":["context/AuthProvider.jsx","components/general/LabelInput.jsx","data/userDataFunctions.jsx","components/NavigationForms.jsx","components/Navigation.jsx","components/LoginForm.jsx","pages/LoginPage.jsx","App.js","pages/ErrorPage.jsx","components/MuseArtikel.jsx","components/ManicArtikel.jsx","components/SistersArtikel.jsx","components/DragonforceArtikel.jsx","pages/Home.jsx","components/general/RatingLabelInput.jsx","components/AlbumComponent.jsx","pages/Album.jsx","components/RegisterForm.jsx","pages/RegisterPage.jsx","index.js","data/dataFunctions.js","data/index.js"],"names":["JWT_TOKEN_KEY","config","token_key","AuthContext","createContext","getUserIdFromStorage","token","parseJwt","userId","base64Url","split","jsonPayload","Buffer","from","toString","JSON","parse","parseExp","exp","Number","isNaN","Date","useAuth","useContext","useSession","user","ready","loading","error","hasRole","localStorage","setItem","removeItem","isAuthed","Boolean","useLogin","login","useLogout","logout","AuthProvider","children","useState","setReady","setLoading","setError","getItem","setToken","setUser","setSession","useCallback","a","expiry","stillValid","api","usersApi","useEffect","Name","Password","console","value","useMemo","Provider","LabelInput","label","type","defaultValue","validation","rest","useFormContext","register","errors","className","htmlFor","placeholder","id","name","message","username","password","axios","post","data","handleError","Register","getUser","get","NavigationForms","Navigation","to","onClick","e","validationRules","required","minLength","maxLength","LoginForm","useForm","handleSubmit","formState","reset","history","useHistory","replace","onSubmit","LoginPage","App","checkTokenValidation","guards","next","meta","auth","redirect","path","exact","component","RegisterPage","Home","Album","ErrorPage","MuseArtikel","undefined","albums","SETalbums","getAllAlbums","FetchData","Object","entries","filter","album","artist","slice","map","albumID","src","picture","alt","width","height","RatingLabelInput","min","max","AlbumComponent","SETalbum","genres","SETgenres","labels","SETlabels","producers","SETproducers","songs","SETsongs","ratings","SETratings","location","pathname","length","parseUrl","useLocation","getAlbum","getGenres","genre","getLabels","getProducers","producer","getSongs","song","getRatingByAlbumID","rating","calculateRating","averageRating","sum","amount","Math","floor","sendRatingPostRequest","userID","postRating","log","userid","parseInt","Rating","window","reload","document","activeElement","blur","labelName","labelID","producerName","producerID","ReleaseDate","genreName","genreID","format","title","time","songID","style","RegisterForm","ReactDOM","render","StrictMode","getElementById","response","alert","stringify","code","parseError","axiosRoot","create","baseURL","process","REACT_APP_BACKEND_BASE_URL","base_url","headers","Authorization","setAuthToken","defaults"],"mappings":"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","file":"static/js/main.60d836cf.chunk.js","sourcesContent":["import {\r\n  createContext,\r\n  useMemo,\r\n  useState,\r\n  useCallback,\r\n  useEffect,\r\n  useContext,\r\n} from \"react\";\r\nimport * as usersApi from \"../data/userDataFunctions\";\r\nimport * as api from \"../data/index\";\r\nimport config from \"../config.json\";\r\n\r\nconst JWT_TOKEN_KEY = config.token_key;\r\nconst AuthContext = createContext();\r\n\r\nexport function getUserIdFromStorage(token) {\r\n  const { userId } = parseJwt(token);\r\n  return userId;\r\n}\r\n\r\nfunction parseJwt(token) {\r\n  if (!token) return {};\r\n  const base64Url = token.split(\".\")[1];\r\n  const payload = Buffer.from(base64Url, \"base64\");\r\n  const jsonPayload = payload.toString(\"ascii\");\r\n  const test = JSON.parse(jsonPayload);\r\n  return test;\r\n}\r\n\r\nfunction parseExp(exp) {\r\n  if (!exp) return null;\r\n  if (typeof exp !== \"number\") exp = Number(exp);\r\n  if (isNaN(exp)) return null;\r\n  return new Date(exp * 1000);\r\n}\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const useSession = () => {\r\n  let { token, user, ready, loading, error, hasRole } = useAuth();\r\n  const { exp } = parseJwt(token);\r\n  const expiry = parseExp(exp);\r\n  const stillValid = expiry >= new Date();\r\n\r\n  if (stillValid) {\r\n    localStorage.setItem(JWT_TOKEN_KEY, token);\r\n  } else {\r\n    localStorage.removeItem(JWT_TOKEN_KEY);\r\n    token = null;\r\n  }\r\n  return {\r\n    token,\r\n    user,\r\n    ready,\r\n    error,\r\n    loading,\r\n    isAuthed: Boolean(token),\r\n    hasRole,\r\n  };\r\n};\r\n\r\nexport const useLogin = () => {\r\n  const { login } = useAuth();\r\n  return login;\r\n};\r\n\r\nexport const useLogout = () => {\r\n  const { logout } = useAuth();\r\n  return logout;\r\n};\r\nexport const AuthProvider = ({ children }) => {\r\n  // will be false until the token is set\r\n  const [ready, setReady] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [token, setToken] = useState(localStorage.getItem(JWT_TOKEN_KEY));\r\n  const [user, setUser] = useState(null);\r\n\r\n  const setSession = useCallback(async (token, user) => {\r\n    const { exp, userId } = parseJwt(token);\r\n    const expiry = parseExp(exp);\r\n    const stillValid = expiry >= new Date();\r\n\r\n    if (stillValid) {\r\n      localStorage.setItem(JWT_TOKEN_KEY, token);\r\n    } else {\r\n      localStorage.removeItem(JWT_TOKEN_KEY);\r\n      token = null;\r\n    }\r\n    api.setAuthToken(token);\r\n    setToken(token);\r\n    setReady(token && stillValid);\r\n\r\n    if (!user && stillValid) {\r\n      user = await usersApi.getUser(userId);\r\n    }\r\n    setUser(user);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setSession(token);\r\n  }, [token, setSession]);\r\n\r\n  const login = useCallback(\r\n    async (Name, Password) => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const { token, user } = await usersApi.login(Name, Password);\r\n        await setSession(token, user);\r\n        if (!token) {\r\n          return false;\r\n        }\r\n        return true;\r\n      } catch (error) {\r\n        console.error(error);\r\n        setError(\"Login failed, try again\");\r\n        return false;\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [setSession]\r\n  );\r\n\r\n  const logout = useCallback(() => {\r\n    setSession(null, null);\r\n    localStorage.removeItem(JWT_TOKEN_KEY);\r\n  }, [setSession]);\r\n\r\n  const value = useMemo(\r\n    () => ({\r\n      token,\r\n      user,\r\n      ready,\r\n      loading,\r\n      error,\r\n      login,\r\n      logout,\r\n    }),\r\n    [token, user, ready, loading, error, login, logout]\r\n  );\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n","import { useFormContext } from \"react-hook-form\";\r\n\r\nconst LabelInput = ({ label, type, defaultValue, validation, ...rest }) => {\r\n  const { register, errors } = useFormContext();\r\n  return (\r\n    <div className=\"labelinput\">\r\n      <label htmlFor={label}>{label}</label>\r\n      <input\r\n        {...register(label, validation)}\r\n        defaultValue={defaultValue}\r\n        placeholder={label}\r\n        type={type}\r\n        id={label}\r\n        name={label}\r\n        {...rest}\r\n      />\r\n      {errors[label] && (\r\n        <div data-cy=\"labelinput-error\" className=\"error\">\r\n          {errors[label].message}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LabelInput;\r\n","import { axios } from \"./index\";\r\nimport { handleError } from \"./dataFunctions\";\r\n\r\nexport const login = async (username, password) => {\r\n  try {\r\n    const data = await axios.post(\r\n      `https://musicshare1.herokuapp.com/api/user/login`,\r\n      {\r\n        username,\r\n        password,\r\n      }\r\n    );\r\n    return data.data;\r\n  } catch (error) {\r\n    handleError(error);\r\n  }\r\n};\r\n\r\nexport const Register = async (username, password) => {\r\n  try {\r\n    const data = await axios.post(\r\n      `https://musicshare1.herokuapp.com/api/user/register`,\r\n      {\r\n        username,\r\n        password,\r\n      }\r\n    );\r\n    return data.data;\r\n  } catch (error) {\r\n    handleError(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const getUser = async (id) => {\r\n  try {\r\n    const data = await axios.get(\r\n      `https://musicshare1.herokuapp.com/api/user/onid/${id}`\r\n    );\r\n    return data.data;\r\n  } catch (error) {\r\n    handleError(error);\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport \"../styles/navigationFormStyle.scss\";\r\n\r\nexport default function NavigationForms() {\r\n  return (\r\n    <div className=\"navigation\">\r\n      <div className=\"title text\">Music Share</div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"../styles/navigationStyle.scss\";\r\nimport { useLogout } from \"../context/AuthProvider\";\r\nexport default function Navigation() {\r\n  const logout = useLogout();\r\n\r\n  return (\r\n    <div className=\"navigation\">\r\n      <div className=\"title text\">Music Share</div>\r\n      <div className=\"navItems\">\r\n        <div className=\"item1 text\">\r\n          <Link to=\"/Home\">home</Link>\r\n        </div>\r\n        <div\r\n          className=\"item2 text\"\r\n          onClick={(e) => {\r\n            logout();\r\n          }}\r\n        >\r\n          <Link to=\"/Login\">Logout</Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useForm, FormProvider } from \"react-hook-form\";\r\nimport LabelInput from \"./general/LabelInput\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"../styles/formStyle.scss\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useLogin, useSession } from \"../context/AuthProvider\";\r\nimport { useEffect } from \"react\";\r\n\r\n//dit is een test\r\nconst validationRules = {\r\n  Name: {\r\n    required: \"this is required\",\r\n    minLength: { value: 4, message: \"Min length is 4\" },\r\n    maxLength: { value: 20, message: \"Max length is 20\" },\r\n  },\r\n  Password: {\r\n    required: \"this is required\",\r\n    minLength: { value: 4, message: \"Min length is 4\" },\r\n    maxLength: { value: 20, message: \"Max length is 20\" },\r\n  },\r\n};\r\n\r\nexport default function LoginForm() {\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    setError,\r\n    reset,\r\n  } = useForm();\r\n  const history = useHistory();\r\n  const { isAuthed } = useSession();\r\n  const login = useLogin();\r\n\r\n  useEffect(() => {\r\n    if (isAuthed) {\r\n      history.replace(\"/\");\r\n    }\r\n  }, [isAuthed, history]);\r\n\r\n  async function onSubmit({ Name, Password }) {\r\n    try {\r\n      const success = await login(Name, Password);\r\n      if (success) {\r\n        history.replace(\"/Home\");\r\n      } else {\r\n        reset();\r\n        setError(\"Name\", {\r\n          type: \"login\",\r\n          message: \"name and password do not match\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <FormProvider\r\n      handleSubmit={handleSubmit}\r\n      errors={errors}\r\n      register={register}\r\n    >\r\n      <div className=\"form\">\r\n        <form onSubmit={handleSubmit(onSubmit)} className=\"login\">\r\n          <LabelInput\r\n            label=\"Name\"\r\n            type=\"text\"\r\n            defaultValue=\"\"\r\n            data-cy=\"loginName\"\r\n            validation={validationRules.Name}\r\n            required\r\n          />\r\n          <LabelInput\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            defaultValue=\"\"\r\n            data-cy=\"loginPassword\"\r\n            validation={validationRules.Password}\r\n            required\r\n          />\r\n          <div className=\"submitbutton\">\r\n            <button\r\n              type=\"submit\"\r\n              id=\"submitButton\"\r\n              data-cy=\"loginSubmit\"\r\n              className=\"button\"\r\n            >\r\n              Login\r\n            </button>\r\n          </div>\r\n          <p className=\"text\">\r\n            Don't yet have an account?\r\n            <br /> Register here:\r\n            <Link to=\"/Register\">\r\n              <button\r\n                type=\"button\"\r\n                id=\"RegisterPage\"\r\n                data-cy=\"visitregisterbtn\"\r\n                className=\"button\"\r\n              >\r\n                Register\r\n              </button>\r\n            </Link>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    </FormProvider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport LoginForm from \"../components/LoginForm\";\r\nimport NavigationForms from \"../components/NavigationForms\";\r\n\r\nexport default function LoginPage() {\r\n  return (\r\n    <>\r\n      <NavigationForms />\r\n      <div className=\"pagewrapper\" data-cy=\"loginpage\">\r\n        <div>\r\n          <LoginForm />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import { HashRouter as Router, Switch } from \"react-router-dom\";\r\nimport LoginPage from \"./pages/LoginPage.jsx\";\r\nimport RegisterPage from \"./pages/RegisterPage.jsx\";\r\nimport Home from \"./pages/Home.jsx\";\r\nimport Album from \"./pages/Album.jsx\";\r\nimport ErrorPage from \"./pages/ErrorPage.jsx\";\r\nimport \"./styles/generalStyle.scss\";\r\nimport { AuthProvider } from \"./context/AuthProvider.jsx\";\r\nimport { GuardProvider, GuardedRoute } from \"react-router-guards\";\r\nimport config from \"./config.json\";\r\nconst JWT_TOKEN_KEY = config.token_key;\r\n\r\nfunction App() {\r\n  function parseJwt(token) {\r\n    if (!token) return {};\r\n    const base64Url = token.split(\".\")[1];\r\n    const payload = Buffer.from(base64Url, \"base64\");\r\n    const jsonPayload = payload.toString(\"ascii\");\r\n    const test = JSON.parse(jsonPayload);\r\n    return test;\r\n  }\r\n\r\n  function parseExp(exp) {\r\n    if (!exp) return null;\r\n    if (typeof exp !== \"number\") exp = Number(exp);\r\n    if (isNaN(exp)) return null;\r\n    return new Date(exp * 1000);\r\n  }\r\n\r\n  function checkTokenValidation() {\r\n    let token = localStorage.getItem(JWT_TOKEN_KEY);\r\n    const { exp } = parseJwt(token);\r\n    const expiry = parseExp(exp);\r\n    const stillValid = expiry >= new Date();\r\n\r\n    if (stillValid) {\r\n      localStorage.setItem(JWT_TOKEN_KEY, token);\r\n    } else {\r\n      localStorage.removeItem(JWT_TOKEN_KEY);\r\n      token = null;\r\n    }\r\n    return Boolean(token);\r\n  }\r\n\r\n  const RequireLogin = (to, from, next) => {\r\n    if (to.meta.auth) {\r\n      if (checkTokenValidation()) {\r\n        next();\r\n      } else {\r\n        next.redirect(\"/Login\");\r\n      }\r\n    } else {\r\n      next();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthProvider>\r\n      <Router>\r\n        <GuardProvider guards={[RequireLogin]}>\r\n          <Switch>\r\n            <GuardedRoute path=\"/\" exact component={LoginPage} />{\" \"}\r\n            <GuardedRoute path=\"/Login\" exact component={LoginPage} />{\" \"}\r\n            <GuardedRoute path=\"/Register\" exact component={RegisterPage} />{\" \"}\r\n            <GuardedRoute\r\n              path=\"/Home\"\r\n              exact\r\n              component={Home}\r\n              meta={{\r\n                auth: true,\r\n              }}\r\n            />{\" \"}\r\n            <GuardedRoute\r\n              path=\"/Album/:id\"\r\n              exact\r\n              component={Album}\r\n              meta={{\r\n                auth: true,\r\n              }}\r\n            />{\" \"}\r\n            <GuardedRoute path=\"*\" component={ErrorPage} />{\" \"}\r\n          </Switch>{\" \"}\r\n        </GuardProvider>{\" \"}\r\n      </Router>{\" \"}\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nexport default function ErrorPage() {\r\n  return (\r\n    <div className=\"pagewrapper\" data-cy=\"errorpage\">\r\n      <div className=\"errorPageWrapper\">\r\n        <div className=\"errorPageTitle\">404</div>\r\n        <div className=\"errorPageMessage\">an error has occurred</div>\r\n        <Link to=\"/home\">\r\n          <div className=\"errorbtn\">\r\n            <button type=\"button\" className=\"button\">\r\n              back\r\n            </button>\r\n          </div>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"../styles/BandArtikelStyle.scss\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { getAllAlbums } from \"../data/dataFunctions\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nexport default function MuseArtikel() {\r\n  const history = useHistory();\r\n  const [albums, SETalbums] = useState(undefined);\r\n  async function FetchData() {\r\n    const data = await getAllAlbums();\r\n    SETalbums(data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    FetchData();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {albums === undefined ? (\r\n        <div>loading</div>\r\n      ) : (\r\n        <div className=\"BandDiv\">\r\n          <div className=\"BandTitle text\">Muse</div>\r\n          <div className=\"bandalbums\">\r\n            {Object.entries(albums)\r\n              .filter((album) => {\r\n                return album[1].artist === \"Muse\";\r\n              })\r\n              .slice(0, 4)\r\n              .map((album) => {\r\n                return (\r\n                  <div className=\"band\" key={album[1].albumID}>\r\n                    <div\r\n                      className=\"image\"\r\n                      onClick={(e) => {\r\n                        history.replace(`/Album/${album[1].albumID}`);\r\n                      }}\r\n                      data-cy={album[1].name}\r\n                    >\r\n                      <img\r\n                        src={album[1].picture}\r\n                        alt={album[1].name}\r\n                        width=\"165\"\r\n                        height=\"165\"\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className=\"Title\"\r\n                      onClick={(e) => {\r\n                        history.replace(`/Album/${album[1].albumID}`);\r\n                      }}\r\n                    >\r\n                      <div className=\"TitleText text\">\r\n                        {album[1].artist} - {album[1].name}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"../styles/BandArtikelStyle.scss\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { getAllAlbums } from \"../data/dataFunctions\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nexport default function MuseArtikel() {\r\n  const history = useHistory();\r\n  const [albums, SETalbums] = useState(undefined);\r\n  async function FetchData() {\r\n    const data = await getAllAlbums();\r\n    SETalbums(data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    FetchData();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {albums === undefined ? (\r\n        <div>loading</div>\r\n      ) : (\r\n        <div className=\"BandDiv\">\r\n          <div className=\"BandTitle text\">Manic Street Preachers</div>\r\n          <div className=\"bandalbums\">\r\n            {Object.entries(albums)\r\n              .filter((album) => {\r\n                return album[1].artist === \"Manic Street Preachers\";\r\n              })\r\n              .slice(0, 4)\r\n              .map((album) => {\r\n                return (\r\n                  <div className=\"band\" key={album[1].albumID}>\r\n                    <div\r\n                      className=\"image\"\r\n                      onClick={(e) => {\r\n                        history.replace(`/Album/${album[1].albumID}`);\r\n                      }}\r\n                      data-cy={album[1].name}\r\n                    >\r\n                      <img\r\n                        src={album[1].picture}\r\n                        alt={album[1].name}\r\n                        width=\"165\"\r\n                        height=\"165\"\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className=\"Title\"\r\n                      onClick={(e) => {\r\n                        history.replace(`/Album/${album[1].albumID}`);\r\n                      }}\r\n                    >\r\n                      <div className=\"TitleText text\">\r\n                        {album[1].artist} - {album[1].name}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"../styles/BandArtikelStyle.scss\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { getAllAlbums } from \"../data/dataFunctions\";\r\n\r\nimport { useHistory } from \"react-router\";\r\nexport default function MuseArtikel() {\r\n  const history = useHistory();\r\n  const [albums, SETalbums] = useState(undefined);\r\n  async function FetchData() {\r\n    const data = await getAllAlbums();\r\n    SETalbums(data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    FetchData();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {albums === undefined ? (\r\n        <div>loading</div>\r\n      ) : (\r\n        <div className=\"BandDiv\">\r\n          <div className=\"BandTitle text\">Sisters Of Mercy</div>\r\n          <div className=\"bandalbums\">\r\n            {Object.entries(albums)\r\n              .filter((album) => {\r\n                return album[1].artist === \"Sisters Of Mercy\";\r\n              })\r\n              .slice(0, 4)\r\n              .map((album) => {\r\n                return (\r\n                  <div className=\"band\" key={album[1].albumID}>\r\n                    <div\r\n                      className=\"image\"\r\n                      onClick={(e) => {\r\n                        history.replace(`/Album/${album[1].albumID}`);\r\n                      }}\r\n                      data-cy={album[1].name}\r\n                    >\r\n                      <img\r\n                        src={album[1].picture}\r\n                        alt={album[1].name}\r\n                        width=\"165\"\r\n                        height=\"165\"\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className=\"Title\"\r\n                      onClick={(e) => {\r\n                        history.replace(`/Album/${album[1].albumID}`);\r\n                      }}\r\n                    >\r\n                      <div className=\"TitleText text\">\r\n                        {album[1].artist} - {album[1].name}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"../styles/BandArtikelStyle.scss\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { getAllAlbums } from \"../data/dataFunctions\";\r\nimport { useHistory } from \"react-router\";\r\nexport default function MuseArtikel() {\r\n  const history = useHistory();\r\n  const [albums, SETalbums] = useState(undefined);\r\n  async function FetchData() {\r\n    const data = await getAllAlbums();\r\n    SETalbums(data);\r\n  }\r\n\r\n  useEffect(() => {\r\n    FetchData();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {albums === undefined ? (\r\n        <div>loading</div>\r\n      ) : (\r\n        <div className=\"BandDiv\">\r\n          <div className=\"BandTitle text\">Dragonforce</div>\r\n          <div className=\"bandalbums\">\r\n            {Object.entries(albums)\r\n              .filter((album) => {\r\n                return album[1].artist === \"Dragonforce\";\r\n              })\r\n              .slice(0, 4)\r\n              .map((album) => {\r\n                return (\r\n                  <div className=\"band\" key={album[1].albumID}>\r\n                    <div\r\n                      className=\"image\"\r\n                      onClick={(e) => {\r\n                        history.replace(`/Album/${album[1].albumID}`);\r\n                      }}\r\n                      data-cy={album[1].name}\r\n                    >\r\n                      <img\r\n                        src={album[1].picture}\r\n                        alt={album[1].name}\r\n                        width=\"165\"\r\n                        height=\"165\"\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      className=\"Title\"\r\n                      onClick={(e) => {\r\n                        history.replace(`/Album/${album[1].albumID}`);\r\n                      }}\r\n                    >\r\n                      <div className=\"TitleText text\">\r\n                        {album[1].artist} - {album[1].name}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport Navigation from \"../components/Navigation\";\r\nimport MuseArtikel from \"../components/MuseArtikel\";\r\nimport ManicArtikel from \"../components/ManicArtikel\";\r\nimport SistersArtikel from \"../components/SistersArtikel\";\r\nimport DragonforceArtikel from \"../components/DragonforceArtikel\";\r\n\r\nexport default function Home() {\r\n  return (\r\n    <>\r\n      <Navigation />\r\n      <div className=\"pagewrapper\" data-cy=\"homepage\">\r\n        <div className=\"home\">\r\n          <MuseArtikel />\r\n          <ManicArtikel />\r\n          <SistersArtikel />\r\n          <DragonforceArtikel />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import { useFormContext } from \"react-hook-form\";\r\n\r\nconst RatingLabelInput = ({\r\n  label,\r\n  type,\r\n  defaultValue,\r\n  validation,\r\n  min,\r\n  max,\r\n  ...rest\r\n}) => {\r\n  const { register, errors } = useFormContext();\r\n  return (\r\n    <div className=\"labelinput\">\r\n      <label htmlFor={label}></label>\r\n      <input\r\n        {...register(label, validation)}\r\n        defaultValue={defaultValue}\r\n        placeholder={label}\r\n        type={type}\r\n        id={label}\r\n        name={label}\r\n        min={min}\r\n        max={max}\r\n        {...rest}\r\n      />\r\n      {errors[label] && (\r\n        <div data-cy=\"labelinput-error\" className=\"error\">\r\n          {errors[label].message}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RatingLabelInput;\r\n","import React from \"react\";\r\nimport \"../styles/AlbumStyle.scss\";\r\nimport { useLocation } from \"react-router\";\r\nimport {\r\n  getAlbum,\r\n  getGenres,\r\n  getLabels,\r\n  getProducers,\r\n  getRatingByAlbumID,\r\n  getSongs,\r\n  postRating,\r\n} from \"../data/dataFunctions\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useForm, FormProvider } from \"react-hook-form\";\r\nimport RatingLabelInput from \"../components/general/RatingLabelInput\";\r\nimport { getUserIdFromStorage } from \"../context/AuthProvider\";\r\n\r\nimport config from \"../config.json\";\r\nconst JWT_TOKEN_KEY = config.token_key;\r\n\r\nexport default function AlbumComponent() {\r\n  const [album, SETalbum] = useState(undefined);\r\n  const [genres, SETgenres] = useState(undefined);\r\n  const [labels, SETlabels] = useState(undefined);\r\n  const [producers, SETproducers] = useState(undefined);\r\n  const [songs, SETsongs] = useState(undefined);\r\n  const [ratings, SETratings] = useState(undefined);\r\n\r\n  const id = parseUrl(useLocation());\r\n\r\n  async function FetchData() {\r\n    if (id) {\r\n      const data = await getAlbum(id);\r\n      SETalbum(data);\r\n      const genre = await getGenres(id);\r\n      SETgenres(genre);\r\n      const label = await getLabels(id);\r\n      SETlabels(label);\r\n      const producer = await getProducers(id);\r\n      SETproducers(producer);\r\n      const song = await getSongs(id);\r\n      SETsongs(song);\r\n      const rating = await getRatingByAlbumID(id);\r\n      SETratings(rating);\r\n    }\r\n  }\r\n\r\n  function calculateRating() {\r\n    let averageRating = 0;\r\n    if (ratings === undefined) {\r\n      averageRating = \"0\";\r\n    } else {\r\n      let sum = 0;\r\n      let amount = 0;\r\n      // eslint-disable-next-line\r\n      for (const rating in ratings.data) {\r\n        sum += ratings.data[amount].rating;\r\n        amount += 1;\r\n      }\r\n      averageRating = Math.floor(sum / amount);\r\n    }\r\n    return averageRating;\r\n  }\r\n\r\n  useEffect(() => {\r\n    FetchData();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const sendRatingPostRequest = async ({ albumID, userID, rating }) => {\r\n    let data = {\r\n      albumID,\r\n      userID,\r\n      rating,\r\n    };\r\n    try {\r\n      return postRating(data);\r\n    } catch (error) {\r\n      console.log(error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    reset,\r\n    setError,\r\n  } = useForm();\r\n\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      const userid = await getUserIdFromStorage(\r\n        localStorage.getItem(JWT_TOKEN_KEY)\r\n      );\r\n      const success = await sendRatingPostRequest({\r\n        albumID: id,\r\n        userID: userid,\r\n        rating: parseInt(data.Rating),\r\n      });\r\n      if (success) {\r\n        window.location.reload();\r\n      } else {\r\n        reset();\r\n        setError(\"Rating\", {\r\n          type: \"Rating\",\r\n          message: \"you've already rated this album\",\r\n        });\r\n        document.activeElement.blur();\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  function parseUrl(location) {\r\n    const split = location.pathname.split(\"/\");\r\n    return split[split.length - 1];\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {album === undefined ||\r\n      labels === undefined ||\r\n      ratings === undefined ||\r\n      genres === undefined ||\r\n      producers === undefined ||\r\n      songs === undefined ? (\r\n        <div>loading</div>\r\n      ) : (\r\n        <div className=\"albumdiv\">\r\n          <div className=\"section1\">\r\n            <div className=\"Album\">\r\n              <div className=\"artwork\">\r\n                <img\r\n                  src={album.picture}\r\n                  alt={album.name}\r\n                  width=\"220\"\r\n                  height=\"220\"\r\n                  data-cy={id}\r\n                />\r\n              </div>\r\n              <div className=\"details\">\r\n                <div className=\"name text\">\r\n                  {album.artist} - {album.name}\r\n                </div>\r\n                <div className=\"labels text\">\r\n                  labels:\r\n                  {Object.entries(labels.data).map((label) => {\r\n                    return (\r\n                      <span className=\"label text\" key={label[1].labelID}>\r\n                        {\" \" + label[1].labelName},\r\n                      </span>\r\n                    );\r\n                  })}\r\n                </div>\r\n                <div className=\"producers text\">\r\n                  producers:\r\n                  {Object.entries(producers.data).map((producer) => {\r\n                    return (\r\n                      <span\r\n                        className=\"producer text\"\r\n                        key={\" \" + producer[1].producerID}\r\n                      >\r\n                        {producer[1].producerName},\r\n                      </span>\r\n                    );\r\n                  })}\r\n                </div>\r\n                <div className=\"releaseDate text\">\r\n                  Release Date:{album.ReleaseDate}\r\n                </div>\r\n                <div className=\"genres text\">\r\n                  Genre:\r\n                  {Object.entries(genres.data).map((genre) => {\r\n                    return (\r\n                      <span className=\"genre text\" key={genre[1].genreID}>\r\n                        {\" \" + genre[1].genreName},\r\n                      </span>\r\n                    );\r\n                  })}\r\n                </div>\r\n                <div className=\"Format text\">Format: {album.format}</div>\r\n                <div className=\"lenght text\">length: {album[\"length\"]}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"tracks\">\r\n              <div className=\"trackList text\">Track List: </div>\r\n              {Object.entries(songs.data).map((song) => {\r\n                return (\r\n                  <div key={song[1].songID}>\r\n                    <div className=\"title text\">{song[1].title}</div>\r\n                    <div className=\"length text\">{song[1].time}</div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          <div className=\"rating text\">\r\n            <div data-cy={album.name + \"Rating\"}>\r\n              Album Rating: {calculateRating()}\r\n            </div>\r\n            <div className=\"ratingBarGreen\">\r\n              <div\r\n                className=\"green\"\r\n                style={{ width: `${calculateRating()}px` }}\r\n              ></div>\r\n            </div>\r\n            <div className=\"ratingFormStart text\">\r\n              Submit your own rating:\r\n              <FormProvider\r\n                handleSubmit={handleSubmit}\r\n                errors={errors}\r\n                register={register}\r\n              >\r\n                <div className=\"ratingFormDiv\">\r\n                  <form\r\n                    onSubmit={handleSubmit(onSubmit)}\r\n                    className=\"ratingForm\"\r\n                  >\r\n                    <RatingLabelInput\r\n                      label=\"Rating\"\r\n                      type=\"number\"\r\n                      defaultValue=\"\"\r\n                      data-cy={album.name + \"RatingInput\"}\r\n                      min=\"0\"\r\n                      max=\"100\"\r\n                    />\r\n                    <div className=\"ratingSubmit\">\r\n                      <button\r\n                        type=\"submit\"\r\n                        id=\"submitButton\"\r\n                        data-cy={album.name + \"RatingSubmit\"}\r\n                        className=\"button\"\r\n                      >\r\n                        submit\r\n                      </button>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </FormProvider>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport AlbumComponent from \"../components/AlbumComponent\";\r\nimport Navigation from \"../components/Navigation\";\r\n//import ReviewForm from \"../components/ReviewForm\";\r\n\r\nexport default function Album() {\r\n  return (\r\n    <>\r\n      <Navigation />\r\n      <div className=\"pagewrapper\" data-cy=\"albumpage\">\r\n        <AlbumComponent />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import { useForm, FormProvider } from \"react-hook-form\";\r\nimport LabelInput from \"../components/general/LabelInput\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"../styles/formStyle.scss\";\r\nimport { Register } from \"../data/userDataFunctions\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst validationRules = {\r\n  Name: {\r\n    required: \"this is required\",\r\n    minLength: { value: 4, message: \"Min length is 4\" },\r\n    maxLength: { value: 20, message: \"Max length is 20\" },\r\n  },\r\n  Password: {\r\n    required: \"this is required\",\r\n    minLength: { value: 4, message: \"Min length is 4\" },\r\n    maxLength: { value: 20, message: \"Max length is 20\" },\r\n  },\r\n  \"Repeat password\": {\r\n    required: \"this is required\",\r\n    minLength: { value: 4, message: \"Min length is 4\" },\r\n    maxLength: { value: 20, message: \"Max length is 20\" },\r\n  },\r\n};\r\n\r\nexport default function RegisterForm() {\r\n  const history = useHistory();\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    setError,\r\n    reset,\r\n  } = useForm();\r\n\r\n  async function onSubmit(data) {\r\n    if (data.Password !== data[\"Repeat password\"]) {\r\n      reset();\r\n      setError(\"Password\", {\r\n        type: \"register\",\r\n        message: \"passwords do not match\",\r\n      });\r\n      setError(\"Repeat password\", {\r\n        type: \"register\",\r\n        message: \"passwords do not match\",\r\n      });\r\n      document.activeElement.blur();\r\n    } else {\r\n      const success = await Register(data.Name, data.Password);\r\n      if (success) {\r\n        history.replace(\"/Login\");\r\n      } else {\r\n        reset();\r\n        setError(\"Name\", {\r\n          type: \"register\",\r\n          message: \"username already exists\",\r\n        });\r\n        document.activeElement.blur();\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <FormProvider\r\n      handleSubmit={handleSubmit}\r\n      errors={errors}\r\n      register={register}\r\n    >\r\n      <div className=\"form\">\r\n        <form onSubmit={handleSubmit(onSubmit)} className=\"login\">\r\n          <LabelInput\r\n            label=\"Name\"\r\n            type=\"text\"\r\n            defaultValue=\"\"\r\n            data-cy=\"registerName\"\r\n            validation={validationRules.Name}\r\n            required\r\n          />\r\n          <LabelInput\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            defaultValue=\"\"\r\n            data-cy=\"registerPassword\"\r\n            validation={validationRules.Password}\r\n            required\r\n          />\r\n          <LabelInput\r\n            label=\"Repeat password\"\r\n            type=\"password\"\r\n            defaultValue=\"\"\r\n            data-cy=\"registerPasswordAgain\"\r\n            validation={validationRules[\"Repeat password\"]}\r\n            required\r\n          />\r\n          <div className=\"submitbutton\">\r\n            <button\r\n              type=\"submit\"\r\n              id=\"submitButton\"\r\n              data-cy=\"registerbtn\"\r\n              className=\"button\"\r\n            >\r\n              Register\r\n            </button>\r\n          </div>\r\n          <p className=\"text\">\r\n            Already have an account?\r\n            <br /> Login here:\r\n            <Link to=\"/Login\">\r\n              <button type=\"button\" id=\"RegisterPage\" className=\"button\">\r\n                Login\r\n              </button>\r\n            </Link>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    </FormProvider>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport RegisterForm from \"../components/RegisterForm\";\r\nimport NavigationForms from \"../components/NavigationForms\";\r\n\r\nexport default function RegisterPage() {\r\n  return (\r\n    <>\r\n      <NavigationForms />\r\n      <div className=\"pagewrapper\">\r\n        <div data-cy=\"registerpage\">\r\n          <RegisterForm />\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n//import reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n//reportWebVitals();\r\n","import { axios } from \"./index\";\r\n\r\nexport const getAllAlbums = async () => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://musicshare1.herokuapp.com/api/album`\r\n    );\r\n    return response.data.data;\r\n  } catch (error) {\r\n    handleError(error);\r\n  }\r\n};\r\n\r\nexport const getRatingByAlbumID = async (id) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://musicshare1.herokuapp.com/api/rating/${id}`\r\n    );\r\n    return response;\r\n  } catch (error) {\r\n    handleError(error);\r\n  }\r\n};\r\n\r\nexport const getAlbum = async (id) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://musicshare1.herokuapp.com/api/album/${id}`\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    handleError(error);\r\n  }\r\n};\r\n\r\nexport const getGenres = async (id) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://musicshare1.herokuapp.com/api/genre/${id}`\r\n    );\r\n    return response;\r\n  } catch (error) {\r\n    handleError(error);\r\n  }\r\n};\r\n\r\nexport const getLabels = async (id) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://musicshare1.herokuapp.com/api/label/${id}`\r\n    );\r\n    return response;\r\n  } catch (error) {\r\n    handleError(error);\r\n  }\r\n};\r\n\r\nexport const getProducers = async (id) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://musicshare1.herokuapp.com/api/producer/${id}`\r\n    );\r\n    return response;\r\n  } catch (error) {\r\n    handleError(error);\r\n  }\r\n};\r\n\r\nexport const getSongs = async (id) => {\r\n  try {\r\n    const response = await axios.get(\r\n      `https://musicshare1.herokuapp.com/api/song/${id}`\r\n    );\r\n    return response;\r\n  } catch (error) {\r\n    handleError(error);\r\n  }\r\n};\r\n\r\nexport const postRating = async (data) => {\r\n  try {\r\n    const response = await axios.post(\r\n      `https://musicshare1.herokuapp.com/api/rating`,\r\n      data\r\n    );\r\n    return response.data;\r\n  } catch (error) {\r\n    handleError(error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport function handleError(error) {\r\n  console.error(error.response);\r\n  window.alert(\"error has occurred \\n\" + JSON.stringify(parseError(error)));\r\n}\r\n\r\nfunction parseError(error) {\r\n  let title, message;\r\n\r\n  if (typeof error === \"object\" && error.response?.data) {\r\n    title = parseErrorCode(error.response.data.code);\r\n    message = error.response.data.message;\r\n\r\n    if (typeof message === \"object\") {\r\n      message = message.message;\r\n    }\r\n  }\r\n\r\n  return {\r\n    title: title || \"Unknown error\",\r\n    message: message || \"Oops, something went wrong, try again later!\",\r\n  };\r\n}\r\n\r\nfunction parseErrorCode(code) {\r\n  if (code === \"VALIDATION_FAILED\") return \"Validation failed\";\r\n  if (code === \"UNAUTHORIZED\") return \"Not authorized\";\r\n  if (code === \"FORBIDDEN\") return \"No permission\";\r\n  if (code === \"NOT_FOUND\") return \"Not found\";\r\n  return \"Unknown error\";\r\n}\r\n","import axiosRoot from 'axios';\r\nimport config from '../config.json';\r\n\r\nexport const axios = axiosRoot.create({\r\n    baseURL: process.env.REACT_APP_BACKEND_BASE_URL || config.base_url,\r\n    headers: {\r\n        // Make sure an existing token is set before the first request is executed\r\n        Authorization: `Bearer ${localStorage.getItem(config.token_key)}`,\r\n    }\r\n});\r\n\r\nexport const setAuthToken = (token) => {\r\n    if (token) {\r\n        axios.defaults.headers['Authorization'] = `Bearer ${token}`;\r\n    } else {\r\n        delete axios.defaults.headers['Authorization'];\r\n    }\r\n}"],"sourceRoot":""}